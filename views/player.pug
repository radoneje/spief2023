extends layout
block head
block content
    .videoWr#videoWr(status=0)
        .placeholder
            include loader.svg
    script.
        const trid=!{JSON.stringify(tr.id)}
        const getStatus=async ()=>{
            let res=await fetch("/spief2023/status/"+trid)
            if(res.ok)
            {
                let status=await res.json();
                let videoWr=document.getElementById("videoWr")
                if(videoWr.getAttribute("status") !=status){
                    res=await fetch("/spief2023/playerCtrl/"+!{tr.id})
                    videoWr.innerHTML=await res.text();
                    videoWr.setAttribute("status", status);
                }
            }
            setTimeout(getStatus, 10*1000)
        }
        getStatus();

